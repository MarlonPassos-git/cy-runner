---
# SECRETS
#
# The name to look for secrets on memory or file
#
# It must be something like that:
# {
#   "vtex": {
#     "apiKey": "",
#     "apiToken": "",
#     "cookieName": "",
#     "robotMail": "",
#     "robotPassword": ""
#   },
#   "twilio": {
#     "apiUser": "",
#     "apiToken": ""
#   },
#   "jira": {
#     "authorization": ""
#   },
#   "cypress": {
#     "dashboardKey": ""
#   }
# }
#
# on development mode, please create a file '.[secretName].json'
# at the same place where cypress.yaml resides to load it
#
# Remember to ignore this file on your Git
secretName: VTEX_QE

# Enabled or disable integrations
integration:
  jira: false
  cypress: false
  slack: false

configuration:
  # If you want to try another secrets on Cypress
  # set the next to false, you must create a file
  # cypress.env.json with the secrets
  vtexCli: false
  devMode: false
  headed: false
  browser: chrome
  createCypressEnvFile: true
  vtex:
    account: productusqa
    id: 2001459804
    domain: myvtex.com
    urlExternalSeller: https://productusqaseller.myvtex.com
    idUrl: https://vtexid.vtex.com.br/api/vtexid/pub/authenticate/default
  jira:
    account: vtex-dev
    board: jira-key
    issueType: task
  cypress:
    projectId: xyz
    video: true
    videoCompression: false
    videoUploadOnPasses: false
    screenshotOnRunFailure: true
    trashAssetsBeforeRuns: false
    viewportWidth: 1440
    viewportHeight: 900
    defaultCommandTimeout: 25000
    requestTimeout: 25000
    watchForFileChanges: false
    pageLoadTimeout: 45000
    browser: chrome
    chromeWebSecurity: false
  slack:
    channel: some-channel
  toolbelt:
    git: https://github.com/vtex/toolbelt.git
    branch: qe/cypress
  # The first will be used to store temp credentials
  stateFiles:
    - .vtex.json

workspace:
  # If blank, it will be dinamically defined
  name:
  setup:
    enabled: false
    stopOnFail: true
    # Must end with /
    path: cypress/integration/workspace/
    file: setup.spec.js
    # The app to be tested, it'll be uninstalled and linked
    link: vtex.b2b-quotes
    # Depdendencies should be first
    install:
      # App set
      - vtex.admin-customers
      - vtex.b2b-checkout-settings
      - vtex.b2b-orders-history
      - vtex.b2b-organizations-graphql
      - vtex.b2b-organizations
      - vtex.b2b-quotes-graphql
      - vtex.b2b-quotes
      - vtex.storefront-permissions
      - vtex.storefront-permissions-components
      - vtex.storefront-permissions-ui
      - vtex.quickorder
      # Theme
      - vtex.wish-list@1.x
      - vtex.location-availability@0.x
      - vtex.shopper-location@0.x
      - vtex.wordpress-integration@2.x
      - vtex.storefront-permissions-ui@0.x
      - vtex.b2bstore@2.x
    # Apps that should be uninstalled
    uninstall:
      - vtex.store-theme
  wipe:
    enabled: false
    stopOnFail: false
    # Must end with /
    path: cypress/integration/workspace/
    file: wipe.spec.js
  teardown:
    enabled: false
    stopOnFail: false
    # Must end with /
    path: cypress/integration/workspace/
    file: teardown.spec.js

testStrategy:
  # Example on how to run in order
  - A:
      enabled: false
      sendDashboard: false
      stopOnFail: false
      # If true, all files will run in one call
      parallel: false
      # If you need order, avoid wildcards
      files:
        - 'cypress/integration/b2b/b.spec.js'

  # Example on how to run in parallel
  # Only if Cypress Dashboard is enabled
  - B:
      enabled: false
      sendDashboard: false
      stopOnFail: true
      # If true, all files will run in one call
      parallel: true
      # If you need order, avoid more than one
      files:
        - 'cypress/integration/b2b/b.spec.js'
        # - 'cypress/integration/b2b/a.spec.js'

  # Example using wild selector
  - C:
      enabled: false
      sendDashboard: false
      stopOnFail: false
      parallel: false
      files:
        - 'cypress/integration/b2b/b.spec.js'

  # Example with dependency
  - D:
      enabled: true
      sendDashboard: false
      stopOnFail: false
      parallel: false
      files:
        - '**/b2b/*.spec.js'
      # Use the same name of earlier test
      dependency:
        - A
        - C

  # Example with fail exit
  - E:
      enabled: true
      sendDashboard: false
      stopOnFail: false
      parallel: false
      files:
        - 'cypress/integration/b2b/b.spec.js'
      dependency:
        - D
